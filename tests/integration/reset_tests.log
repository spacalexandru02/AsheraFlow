Using ASH executable: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow
Using temporary directory for test repos: /var/folders/0z/02sl9x695lj1flvcl639dvm40000gn/T/tmp.Lbw4dP8uRd
Logging detailed output to: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/tests/integration/reset_tests.log

[0;34m--- Test: Soft Reset ---[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Init { path: "." }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing InitCommand for path: '.'
Initialized empty Ash repository in /private/var/folders/0z/02sl9x695lj1flvcl639dvm40000gn/T/tmp.Lbw4dP8uRd/soft_reset_repo/.ash
[0;34mInitialized repo in /var/folders/0z/02sl9x695lj1flvcl639dvm40000gn/T/tmp.Lbw4dP8uRd/soft_reset_repo[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file1.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file1.txt"]
Storing object of type: blob
Serializing blob object, content size: 11 bytes
Calculated OID: 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Object 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 doesn't exist, writing to database
1 new file added to index (0.00s)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C1" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C1'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: None
Processing entry: file1.txt
Added top-level file: file1.txt
Final tree structure:
  Tree Structure:
  file1.txt (blob, mode 100644) -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Processing tree with 1 entries
Storing object of type: tree
Serializing tree object, content size: 37 bytes
Calculated OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Object 8510ca5200643cdbd8d5d863d2b81db93c6dd409 doesn't exist, writing to database
Tree has OID 8510ca5200643cdbd8d5d863d2b81db93c6dd409 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Root commit with entries detected.
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 165 bytes
Calculated OID: 03e206869e244522c58c630b4fd290a1ad5f6513
Object 03e206869e244522c58c630b4fd290a1ad5f6513 doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 03e206869e244522c58c630b4fd290a1ad5f6513
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 03e206869e244522c58c630b4fd290a1ad5f6513
[(root-commit) 03e2068] Commit C1 (0.00s)
1 file changed
  Commit on 'master': 'Commit C1' (file1.txt)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file2.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file2.txt"]
Storing object of type: blob
Serializing blob object, content size: 11 bytes
Calculated OID: 510f0a5c67260391a39e9649b47ac9e77d428264
Object 510f0a5c67260391a39e9649b47ac9e77d428264 doesn't exist, writing to database
Examining HEAD commit: 03e206869e244522c58c630b4fd290a1ad5f6513
Root tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Traversing tree: 8510ca5200643cdbd8d5d863d2b81db93c6dd409 at path: 
Parsing tree object: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Found file: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Found 1 files in HEAD
1 new file added to index (0.00s)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C2" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C2'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: Some("03e206869e244522c58c630b4fd290a1ad5f6513")
Processing entry: file1.txt
Added top-level file: file1.txt
Processing entry: file2.txt
Added top-level file: file2.txt
Final tree structure:
  Tree Structure:
  file1.txt (blob, mode 100644) -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
  file2.txt (blob, mode 100644) -> 510f0a5c67260391a39e9649b47ac9e77d428264
Processing tree with 2 entries
Storing object of type: tree
Serializing tree object, content size: 74 bytes
Calculated OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Object ed5cc024b281c00d3756c8b9faab4ccb32711aa3 doesn't exist, writing to database
Tree has OID ed5cc024b281c00d3756c8b9faab4ccb32711aa3 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Parent commit tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 213 bytes
Calculated OID: 833fca624f85c4d438cb8acf557e0f37f1a99977
Object 833fca624f85c4d438cb8acf557e0f37f1a99977 doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 833fca624f85c4d438cb8acf557e0f37f1a99977
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 833fca624f85c4d438cb8acf557e0f37f1a99977
Parsing tree object: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
[833fca6] Commit C2 (0.00s)
1 file changed
  Commit on 'master': 'Commit C2' (file2.txt)
[0;33m  CMD [in soft_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow add file1.txt file3.txt[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file1.txt", "file3.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file1.txt", "file3.txt"]
Storing object of type: blob
Serializing blob object, content size: 18 bytes
Calculated OID: 074c3daf449107e2eb48885fc235a22796aa9711
Object 074c3daf449107e2eb48885fc235a22796aa9711 doesn't exist, writing to database
Storing object of type: blob
Serializing blob object, content size: 13 bytes
Calculated OID: 0625e276795ad8c80ed57e47d862dbe0afb9a393
Object 0625e276795ad8c80ed57e47d862dbe0afb9a393 doesn't exist, writing to database
Examining HEAD commit: 833fca624f85c4d438cb8acf557e0f37f1a99977
Root tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Traversing tree: ed5cc024b281c00d3756c8b9faab4ccb32711aa3 at path: 
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Found file: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264
Found file: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Found 2 files in HEAD
1 new file and 1 modified file added to index (0.00s)
[0;32m  CMD OK[0m
[0;33m  CMD [in soft_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow commit -m Commit C3[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C3" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C3'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: Some("833fca624f85c4d438cb8acf557e0f37f1a99977")
Processing entry: file1.txt
Added top-level file: file1.txt
Processing entry: file2.txt
Added top-level file: file2.txt
Processing entry: file3.txt
Added top-level file: file3.txt
Final tree structure:
  Tree Structure:
  file3.txt (blob, mode 100644) -> 0625e276795ad8c80ed57e47d862dbe0afb9a393
  file2.txt (blob, mode 100644) -> 510f0a5c67260391a39e9649b47ac9e77d428264
  file1.txt (blob, mode 100644) -> 074c3daf449107e2eb48885fc235a22796aa9711
Processing tree with 3 entries
Storing object of type: tree
Serializing tree object, content size: 111 bytes
Calculated OID: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Object 22fc390398bee180968a2cc7edc2e6e8f8e5be53 doesn't exist, writing to database
Tree has OID 22fc390398bee180968a2cc7edc2e6e8f8e5be53 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Parent commit tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 213 bytes
Calculated OID: 2ce76dfcf714875c04674c6e08525762d4cea2fa
Object 2ce76dfcf714875c04674c6e08525762d4cea2fa doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 2ce76dfcf714875c04674c6e08525762d4cea2fa
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 2ce76dfcf714875c04674c6e08525762d4cea2fa
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Parsing tree object: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Tree parse: Found file entry: file1.txt -> 074c3daf449107e2eb48885fc235a22796aa9711 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Tree parse: Found file entry: file3.txt -> 0625e276795ad8c80ed57e47d862dbe0afb9a393 (mode 100644)
[2ce76df] Commit C3 (0.00s)
2 files changed
[0;32m  CMD OK[0m
[0;33m  CMD [in soft_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow reset --soft [0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Reset { revision: "", paths: [], soft: true, mixed: false, hard: false }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing ResetCommand with revision: "", paths: []
Starting reset operation...
[32mHEAD is now at[0m: 2ce76dfc -> [33m2ce76dfc[0m
Reset completed in 0.00s
[0;32m  CMD OK[0m
[0;33mTEST: Soft Reset: HEAD should be C1[0m
[0;31mFAIL: Soft Reset: HEAD should be C1 - Expected HEAD OID '', but got '2ce76dfcf714875c04674c6e08525762d4cea2fa'. HEAD content: 'ref: refs/heads/master' [0m
[0;33mTEST: Soft Reset: Index should differ from new HEAD (C1)[0m
[0;32mPASS: Soft Reset: Index should differ from new HEAD (C1) (Index differs from HEAD as expected)[0m
[0;33mTEST: Soft Reset: Working dir file1.txt should exist[0m
[0;32mPASS: Soft Reset: Working dir file1.txt should exist[0m
[0;33mTEST: Soft Reset: Working dir file2.txt should exist[0m
[0;32mPASS: Soft Reset: Working dir file2.txt should exist[0m
[0;33mTEST: Soft Reset: Working dir file3.txt should exist (from C3)[0m
[0;32mPASS: Soft Reset: Working dir file3.txt should exist (from C3)[0m
[0;33mTEST: Soft Reset: Working dir file4.txt should exist (untracked)[0m
[0;32mPASS: Soft Reset: Working dir file4.txt should exist (untracked)[0m
[0;33mTEST: Soft Reset: Working dir file1.txt should contain unstaged changes[0m
[0;32mPASS: Soft Reset: Working dir file1.txt should contain unstaged changes[0m

[0;34m--- Test: Mixed Reset (Default) ---[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Init { path: "." }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing InitCommand for path: '.'
Initialized empty Ash repository in /private/var/folders/0z/02sl9x695lj1flvcl639dvm40000gn/T/tmp.Lbw4dP8uRd/mixed_reset_repo/.ash
[0;34mInitialized repo in /var/folders/0z/02sl9x695lj1flvcl639dvm40000gn/T/tmp.Lbw4dP8uRd/mixed_reset_repo[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file1.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file1.txt"]
Storing object of type: blob
Serializing blob object, content size: 11 bytes
Calculated OID: 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Object 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 doesn't exist, writing to database
1 new file added to index (0.00s)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C1" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C1'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: None
Processing entry: file1.txt
Added top-level file: file1.txt
Final tree structure:
  Tree Structure:
  file1.txt (blob, mode 100644) -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Processing tree with 1 entries
Storing object of type: tree
Serializing tree object, content size: 37 bytes
Calculated OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Object 8510ca5200643cdbd8d5d863d2b81db93c6dd409 doesn't exist, writing to database
Tree has OID 8510ca5200643cdbd8d5d863d2b81db93c6dd409 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Root commit with entries detected.
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 165 bytes
Calculated OID: 03e206869e244522c58c630b4fd290a1ad5f6513
Object 03e206869e244522c58c630b4fd290a1ad5f6513 doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 03e206869e244522c58c630b4fd290a1ad5f6513
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 03e206869e244522c58c630b4fd290a1ad5f6513
[(root-commit) 03e2068] Commit C1 (0.00s)
1 file changed
  Commit on 'master': 'Commit C1' (file1.txt)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file2.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file2.txt"]
Storing object of type: blob
Serializing blob object, content size: 11 bytes
Calculated OID: 510f0a5c67260391a39e9649b47ac9e77d428264
Object 510f0a5c67260391a39e9649b47ac9e77d428264 doesn't exist, writing to database
Examining HEAD commit: 03e206869e244522c58c630b4fd290a1ad5f6513
Root tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Traversing tree: 8510ca5200643cdbd8d5d863d2b81db93c6dd409 at path: 
Parsing tree object: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Found file: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Found 1 files in HEAD
1 new file added to index (0.00s)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C2" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C2'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: Some("03e206869e244522c58c630b4fd290a1ad5f6513")
Processing entry: file1.txt
Added top-level file: file1.txt
Processing entry: file2.txt
Added top-level file: file2.txt
Final tree structure:
  Tree Structure:
  file2.txt (blob, mode 100644) -> 510f0a5c67260391a39e9649b47ac9e77d428264
  file1.txt (blob, mode 100644) -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Processing tree with 2 entries
Storing object of type: tree
Serializing tree object, content size: 74 bytes
Calculated OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Object ed5cc024b281c00d3756c8b9faab4ccb32711aa3 doesn't exist, writing to database
Tree has OID ed5cc024b281c00d3756c8b9faab4ccb32711aa3 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Parent commit tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 213 bytes
Calculated OID: 833fca624f85c4d438cb8acf557e0f37f1a99977
Object 833fca624f85c4d438cb8acf557e0f37f1a99977 doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 833fca624f85c4d438cb8acf557e0f37f1a99977
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 833fca624f85c4d438cb8acf557e0f37f1a99977
Parsing tree object: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
[833fca6] Commit C2 (0.00s)
1 file changed
  Commit on 'master': 'Commit C2' (file2.txt)
[0;33m  CMD [in mixed_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow add file1.txt file3.txt[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file1.txt", "file3.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file1.txt", "file3.txt"]
Storing object of type: blob
Serializing blob object, content size: 18 bytes
Calculated OID: 074c3daf449107e2eb48885fc235a22796aa9711
Object 074c3daf449107e2eb48885fc235a22796aa9711 doesn't exist, writing to database
Storing object of type: blob
Serializing blob object, content size: 13 bytes
Calculated OID: 0625e276795ad8c80ed57e47d862dbe0afb9a393
Object 0625e276795ad8c80ed57e47d862dbe0afb9a393 doesn't exist, writing to database
Examining HEAD commit: 833fca624f85c4d438cb8acf557e0f37f1a99977
Root tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Traversing tree: ed5cc024b281c00d3756c8b9faab4ccb32711aa3 at path: 
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Found file: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264
Found file: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Found 2 files in HEAD
1 new file and 1 modified file added to index (0.00s)
[0;32m  CMD OK[0m
[0;33m  CMD [in mixed_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow commit -m Commit C3[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C3" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C3'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: Some("833fca624f85c4d438cb8acf557e0f37f1a99977")
Processing entry: file1.txt
Added top-level file: file1.txt
Processing entry: file2.txt
Added top-level file: file2.txt
Processing entry: file3.txt
Added top-level file: file3.txt
Final tree structure:
  Tree Structure:
  file3.txt (blob, mode 100644) -> 0625e276795ad8c80ed57e47d862dbe0afb9a393
  file1.txt (blob, mode 100644) -> 074c3daf449107e2eb48885fc235a22796aa9711
  file2.txt (blob, mode 100644) -> 510f0a5c67260391a39e9649b47ac9e77d428264
Processing tree with 3 entries
Storing object of type: tree
Serializing tree object, content size: 111 bytes
Calculated OID: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Object 22fc390398bee180968a2cc7edc2e6e8f8e5be53 doesn't exist, writing to database
Tree has OID 22fc390398bee180968a2cc7edc2e6e8f8e5be53 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Parent commit tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 213 bytes
Calculated OID: 2ce76dfcf714875c04674c6e08525762d4cea2fa
Object 2ce76dfcf714875c04674c6e08525762d4cea2fa doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 2ce76dfcf714875c04674c6e08525762d4cea2fa
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 2ce76dfcf714875c04674c6e08525762d4cea2fa
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Parsing tree object: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Tree parse: Found file entry: file1.txt -> 074c3daf449107e2eb48885fc235a22796aa9711 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Tree parse: Found file entry: file3.txt -> 0625e276795ad8c80ed57e47d862dbe0afb9a393 (mode 100644)
[2ce76df] Commit C3 (0.00s)
2 files changed
[0;32m  CMD OK[0m
[0;33m  CMD [in mixed_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow reset [0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Reset { revision: "", paths: [], soft: false, mixed: true, hard: false }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing ResetCommand with revision: "", paths: []
Starting reset operation...
Resetting index to commit 2ce76dfc
Loading tree from commit: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Parsing tree object: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Tree parse: Found file entry: file1.txt -> 074c3daf449107e2eb48885fc235a22796aa9711 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Tree parse: Found file entry: file3.txt -> 0625e276795ad8c80ed57e47d862dbe0afb9a393 (mode 100644)
Adding to index: file2.txt
Adding to index: file3.txt
Adding to index: file1.txt
[32mHEAD is now at[0m: 2ce76dfc -> [33m2ce76dfc[0m
Reset completed in 0.00s
[0;32m  CMD OK[0m
[0;33mTEST: Mixed Reset: HEAD should be C1[0m
[0;31mFAIL: Mixed Reset: HEAD should be C1 - Expected HEAD OID '', but got '2ce76dfcf714875c04674c6e08525762d4cea2fa'. HEAD content: 'ref: refs/heads/master' [0m
[0;33mTEST: Mixed Reset: Index should match new HEAD (C1)[0m
[0;31mFAIL: Mixed Reset: Index should match new HEAD (C1) - Expected index to match HEAD, but 'diff --cached' showed changes:[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Diff { paths: [], cached: true }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing DiffCommand (cached: true, paths: [])
Parsing tree object: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Tree parse: Found file entry: file1.txt -> 074c3daf449107e2eb48885fc235a22796aa9711 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Tree parse: Found file entry: file3.txt -> 0625e276795ad8c80ed57e47d862dbe0afb9a393 (mode 100644)
[0;33mTEST: Mixed Reset: Working dir file1.txt should exist[0m
[0;32mPASS: Mixed Reset: Working dir file1.txt should exist[0m
[0;33mTEST: Mixed Reset: Working dir file2.txt should exist[0m
[0;32mPASS: Mixed Reset: Working dir file2.txt should exist[0m
[0;33mTEST: Mixed Reset: Working dir file3.txt should exist (from C3, now unstaged)[0m
[0;32mPASS: Mixed Reset: Working dir file3.txt should exist (from C3, now unstaged)[0m
[0;33mTEST: Mixed Reset: Working dir file4.txt should exist (untracked)[0m
[0;32mPASS: Mixed Reset: Working dir file4.txt should exist (untracked)[0m
[0;33mTEST: Mixed Reset: Working dir file1.txt should still contain unstaged changes[0m
[0;32mPASS: Mixed Reset: Working dir file1.txt should still contain unstaged changes[0m
[0;33mTEST: Mixed Reset: Working dir file3.txt should still contain C3 content (now unstaged)[0m
[0;32mPASS: Mixed Reset: Working dir file3.txt should still contain C3 content (now unstaged)[0m

[0;34m--- Test: Hard Reset ---[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Init { path: "." }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing InitCommand for path: '.'
Initialized empty Ash repository in /private/var/folders/0z/02sl9x695lj1flvcl639dvm40000gn/T/tmp.Lbw4dP8uRd/hard_reset_repo/.ash
[0;34mInitialized repo in /var/folders/0z/02sl9x695lj1flvcl639dvm40000gn/T/tmp.Lbw4dP8uRd/hard_reset_repo[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file1.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file1.txt"]
Storing object of type: blob
Serializing blob object, content size: 11 bytes
Calculated OID: 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Object 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 doesn't exist, writing to database
1 new file added to index (0.00s)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C1" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C1'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: None
Processing entry: file1.txt
Added top-level file: file1.txt
Final tree structure:
  Tree Structure:
  file1.txt (blob, mode 100644) -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Processing tree with 1 entries
Storing object of type: tree
Serializing tree object, content size: 37 bytes
Calculated OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Object 8510ca5200643cdbd8d5d863d2b81db93c6dd409 doesn't exist, writing to database
Tree has OID 8510ca5200643cdbd8d5d863d2b81db93c6dd409 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Root commit with entries detected.
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 165 bytes
Calculated OID: 03e206869e244522c58c630b4fd290a1ad5f6513
Object 03e206869e244522c58c630b4fd290a1ad5f6513 doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 03e206869e244522c58c630b4fd290a1ad5f6513
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 03e206869e244522c58c630b4fd290a1ad5f6513
[(root-commit) 03e2068] Commit C1 (0.00s)
1 file changed
  Commit on 'master': 'Commit C1' (file1.txt)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file2.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file2.txt"]
Storing object of type: blob
Serializing blob object, content size: 11 bytes
Calculated OID: 510f0a5c67260391a39e9649b47ac9e77d428264
Object 510f0a5c67260391a39e9649b47ac9e77d428264 doesn't exist, writing to database
Examining HEAD commit: 03e206869e244522c58c630b4fd290a1ad5f6513
Root tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Traversing tree: 8510ca5200643cdbd8d5d863d2b81db93c6dd409 at path: 
Parsing tree object: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Found file: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Found 1 files in HEAD
1 new file added to index (0.00s)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C2" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C2'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: Some("03e206869e244522c58c630b4fd290a1ad5f6513")
Processing entry: file1.txt
Added top-level file: file1.txt
Processing entry: file2.txt
Added top-level file: file2.txt
Final tree structure:
  Tree Structure:
  file2.txt (blob, mode 100644) -> 510f0a5c67260391a39e9649b47ac9e77d428264
  file1.txt (blob, mode 100644) -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Processing tree with 2 entries
Storing object of type: tree
Serializing tree object, content size: 74 bytes
Calculated OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Object ed5cc024b281c00d3756c8b9faab4ccb32711aa3 doesn't exist, writing to database
Tree has OID ed5cc024b281c00d3756c8b9faab4ccb32711aa3 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Parent commit tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 213 bytes
Calculated OID: 833fca624f85c4d438cb8acf557e0f37f1a99977
Object 833fca624f85c4d438cb8acf557e0f37f1a99977 doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 833fca624f85c4d438cb8acf557e0f37f1a99977
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 833fca624f85c4d438cb8acf557e0f37f1a99977
Parsing tree object: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
[833fca6] Commit C2 (0.00s)
1 file changed
  Commit on 'master': 'Commit C2' (file2.txt)
[0;33m  CMD [in hard_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow add file1.txt file3.txt[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file1.txt", "file3.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file1.txt", "file3.txt"]
Storing object of type: blob
Serializing blob object, content size: 13 bytes
Calculated OID: 0625e276795ad8c80ed57e47d862dbe0afb9a393
Object 0625e276795ad8c80ed57e47d862dbe0afb9a393 doesn't exist, writing to database
Storing object of type: blob
Serializing blob object, content size: 18 bytes
Calculated OID: 074c3daf449107e2eb48885fc235a22796aa9711
Object 074c3daf449107e2eb48885fc235a22796aa9711 doesn't exist, writing to database
Examining HEAD commit: 833fca624f85c4d438cb8acf557e0f37f1a99977
Root tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Traversing tree: ed5cc024b281c00d3756c8b9faab4ccb32711aa3 at path: 
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Found file: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Found file: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264
Found 2 files in HEAD
1 new file and 1 modified file added to index (0.00s)
[0;32m  CMD OK[0m
[0;33m  CMD [in hard_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow commit -m Commit C3[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C3" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C3'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: Some("833fca624f85c4d438cb8acf557e0f37f1a99977")
Processing entry: file1.txt
Added top-level file: file1.txt
Processing entry: file2.txt
Added top-level file: file2.txt
Processing entry: file3.txt
Added top-level file: file3.txt
Final tree structure:
  Tree Structure:
  file1.txt (blob, mode 100644) -> 074c3daf449107e2eb48885fc235a22796aa9711
  file2.txt (blob, mode 100644) -> 510f0a5c67260391a39e9649b47ac9e77d428264
  file3.txt (blob, mode 100644) -> 0625e276795ad8c80ed57e47d862dbe0afb9a393
Processing tree with 3 entries
Storing object of type: tree
Serializing tree object, content size: 111 bytes
Calculated OID: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Object 22fc390398bee180968a2cc7edc2e6e8f8e5be53 doesn't exist, writing to database
Tree has OID 22fc390398bee180968a2cc7edc2e6e8f8e5be53 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Parent commit tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 213 bytes
Calculated OID: 2ce76dfcf714875c04674c6e08525762d4cea2fa
Object 2ce76dfcf714875c04674c6e08525762d4cea2fa doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 2ce76dfcf714875c04674c6e08525762d4cea2fa
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 2ce76dfcf714875c04674c6e08525762d4cea2fa
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Parsing tree object: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Tree parse: Found file entry: file1.txt -> 074c3daf449107e2eb48885fc235a22796aa9711 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Tree parse: Found file entry: file3.txt -> 0625e276795ad8c80ed57e47d862dbe0afb9a393 (mode 100644)
[2ce76df] Commit C3 (0.00s)
2 files changed
[0;32m  CMD OK[0m
[0;33m  CMD [in hard_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow reset --hard [0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Reset { revision: "", paths: [], soft: false, mixed: false, hard: true }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing ResetCommand with revision: "", paths: []
Starting reset operation...
Hard resetting to commit 2ce76dfc
Found 0 differences between HEAD and target commit
Analyzing changes for migration
Executing 0 changes
Performing final empty directory cleanup
Working directory and index updated successfully
[32mHEAD is now at[0m: 2ce76dfc -> [33m2ce76dfc[0m
Reset completed in 0.00s
[0;32m  CMD OK[0m
[0;33mTEST: Hard Reset: HEAD should be C1[0m
[0;31mFAIL: Hard Reset: HEAD should be C1 - Expected HEAD OID '', but got '2ce76dfcf714875c04674c6e08525762d4cea2fa'. HEAD content: 'ref: refs/heads/master' [0m
[0;33mTEST: Hard Reset: Index should match new HEAD (C1)[0m
[0;31mFAIL: Hard Reset: Index should match new HEAD (C1) - Expected index to match HEAD, but 'diff --cached' showed changes:[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Diff { paths: [], cached: true }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing DiffCommand (cached: true, paths: [])
Parsing tree object: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Tree parse: Found file entry: file1.txt -> 074c3daf449107e2eb48885fc235a22796aa9711 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Tree parse: Found file entry: file3.txt -> 0625e276795ad8c80ed57e47d862dbe0afb9a393 (mode 100644)
[0;33mTEST: Hard Reset: Working dir file1.txt should exist[0m
[0;32mPASS: Hard Reset: Working dir file1.txt should exist[0m
[0;33mTEST: Hard Reset: Working dir file2.txt should NOT exist (added in C2)[0m
[0;31mFAIL: Hard Reset: Working dir file2.txt should NOT exist (added in C2) - File 'hard_reset_repo/file2.txt' exists when it shouldn't.[0m
[0;33mTEST: Hard Reset: Working dir file3.txt should NOT exist (added in C3)[0m
[0;31mFAIL: Hard Reset: Working dir file3.txt should NOT exist (added in C3) - File 'hard_reset_repo/file3.txt' exists when it shouldn't.[0m
[0;33mTEST: Hard Reset: Working dir file4.txt should still exist (untracked)[0m
[0;32mPASS: Hard Reset: Working dir file4.txt should still exist (untracked)[0m
[0;33mTEST: Hard Reset: Working dir file1.txt should contain C1 content[0m
[0;31mFAIL: Hard Reset: Working dir file1.txt should contain C1 content - File 'hard_reset_repo/file1.txt' does not contain 'Content C1'. Actual content:[0m
Modified file1 C3
Unstaged change file1
[0;33mTEST: Hard Reset: Untracked file4 content should be preserved[0m
[0;32mPASS: Hard Reset: Untracked file4 content should be preserved[0m

[0;34m--- Test: Path Reset ---[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Init { path: "." }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing InitCommand for path: '.'
Initialized empty Ash repository in /private/var/folders/0z/02sl9x695lj1flvcl639dvm40000gn/T/tmp.Lbw4dP8uRd/path_reset_repo/.ash
[0;34mInitialized repo in /var/folders/0z/02sl9x695lj1flvcl639dvm40000gn/T/tmp.Lbw4dP8uRd/path_reset_repo[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file1.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file1.txt"]
Storing object of type: blob
Serializing blob object, content size: 11 bytes
Calculated OID: 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Object 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 doesn't exist, writing to database
1 new file added to index (0.00s)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C1" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C1'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: None
Processing entry: file1.txt
Added top-level file: file1.txt
Final tree structure:
  Tree Structure:
  file1.txt (blob, mode 100644) -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Processing tree with 1 entries
Storing object of type: tree
Serializing tree object, content size: 37 bytes
Calculated OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Object 8510ca5200643cdbd8d5d863d2b81db93c6dd409 doesn't exist, writing to database
Tree has OID 8510ca5200643cdbd8d5d863d2b81db93c6dd409 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Root commit with entries detected.
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 165 bytes
Calculated OID: 03e206869e244522c58c630b4fd290a1ad5f6513
Object 03e206869e244522c58c630b4fd290a1ad5f6513 doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 03e206869e244522c58c630b4fd290a1ad5f6513
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 03e206869e244522c58c630b4fd290a1ad5f6513
[(root-commit) 03e2068] Commit C1 (0.00s)
1 file changed
  Commit on 'master': 'Commit C1' (file1.txt)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file2.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file2.txt"]
Storing object of type: blob
Serializing blob object, content size: 11 bytes
Calculated OID: 510f0a5c67260391a39e9649b47ac9e77d428264
Object 510f0a5c67260391a39e9649b47ac9e77d428264 doesn't exist, writing to database
Examining HEAD commit: 03e206869e244522c58c630b4fd290a1ad5f6513
Root tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Traversing tree: 8510ca5200643cdbd8d5d863d2b81db93c6dd409 at path: 
Parsing tree object: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Found file: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Found 1 files in HEAD
1 new file added to index (0.00s)
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C2" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C2'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: Some("03e206869e244522c58c630b4fd290a1ad5f6513")
Processing entry: file1.txt
Added top-level file: file1.txt
Processing entry: file2.txt
Added top-level file: file2.txt
Final tree structure:
  Tree Structure:
  file1.txt (blob, mode 100644) -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
  file2.txt (blob, mode 100644) -> 510f0a5c67260391a39e9649b47ac9e77d428264
Processing tree with 2 entries
Storing object of type: tree
Serializing tree object, content size: 74 bytes
Calculated OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Object ed5cc024b281c00d3756c8b9faab4ccb32711aa3 doesn't exist, writing to database
Tree has OID ed5cc024b281c00d3756c8b9faab4ccb32711aa3 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Parent commit tree OID: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 213 bytes
Calculated OID: 833fca624f85c4d438cb8acf557e0f37f1a99977
Object 833fca624f85c4d438cb8acf557e0f37f1a99977 doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 833fca624f85c4d438cb8acf557e0f37f1a99977
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 833fca624f85c4d438cb8acf557e0f37f1a99977
Parsing tree object: 8510ca5200643cdbd8d5d863d2b81db93c6dd409
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
[833fca6] Commit C2 (0.00s)
1 file changed
  Commit on 'master': 'Commit C2' (file2.txt)
[0;33m  CMD [in path_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow add file1.txt file3.txt[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Add { paths: ["file1.txt", "file3.txt"] }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing AddCommand for paths: ["file1.txt", "file3.txt"]
Storing object of type: blob
Serializing blob object, content size: 13 bytes
Calculated OID: 0625e276795ad8c80ed57e47d862dbe0afb9a393
Object 0625e276795ad8c80ed57e47d862dbe0afb9a393 doesn't exist, writing to database
Storing object of type: blob
Serializing blob object, content size: 18 bytes
Calculated OID: 074c3daf449107e2eb48885fc235a22796aa9711
Object 074c3daf449107e2eb48885fc235a22796aa9711 doesn't exist, writing to database
Examining HEAD commit: 833fca624f85c4d438cb8acf557e0f37f1a99977
Root tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Traversing tree: ed5cc024b281c00d3756c8b9faab4ccb32711aa3 at path: 
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Found file: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9
Found file: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264
Found 2 files in HEAD
1 new file and 1 modified file added to index (0.00s)
[0;32m  CMD OK[0m
[0;33m  CMD [in path_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow commit -m Commit C3[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Commit { message: "Commit C3" }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing CommitCommand with message: 'Commit C3'
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Starting commit execution
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Loading index
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Index loaded successfully
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Reading HEAD
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] HEAD read successfully: Some("833fca624f85c4d438cb8acf557e0f37f1a99977")
Processing entry: file1.txt
Added top-level file: file1.txt
Processing entry: file2.txt
Added top-level file: file2.txt
Processing entry: file3.txt
Added top-level file: file3.txt
Final tree structure:
  Tree Structure:
  file2.txt (blob, mode 100644) -> 510f0a5c67260391a39e9649b47ac9e77d428264
  file3.txt (blob, mode 100644) -> 0625e276795ad8c80ed57e47d862dbe0afb9a393
  file1.txt (blob, mode 100644) -> 074c3daf449107e2eb48885fc235a22796aa9711
Processing tree with 3 entries
Storing object of type: tree
Serializing tree object, content size: 111 bytes
Calculated OID: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Object 22fc390398bee180968a2cc7edc2e6e8f8e5be53 doesn't exist, writing to database
Tree has OID 22fc390398bee180968a2cc7edc2e6e8f8e5be53 after processing
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Current index tree OID: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Parent commit tree OID: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Proceeding with commit creation...
Storing object of type: commit
Serializing commit object, content size: 213 bytes
Calculated OID: 2ce76dfcf714875c04674c6e08525762d4cea2fa
Object 2ce76dfcf714875c04674c6e08525762d4cea2fa doesn't exist, writing to database
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Stored commit object with OID: 2ce76dfcf714875c04674c6e08525762d4cea2fa
[2025-04-06T15:23:28Z INFO  AsheraFlow::commands::commit] Updated HEAD to 2ce76dfcf714875c04674c6e08525762d4cea2fa
Parsing tree object: ed5cc024b281c00d3756c8b9faab4ccb32711aa3
Tree parse: Found file entry: file1.txt -> 8f8c8bbccf6fe480e22ea4a4e1a6317d1a1133d9 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Parsing tree object: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Tree parse: Found file entry: file1.txt -> 074c3daf449107e2eb48885fc235a22796aa9711 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Tree parse: Found file entry: file3.txt -> 0625e276795ad8c80ed57e47d862dbe0afb9a393 (mode 100644)
[2ce76df] Commit C3 (0.00s)
2 files changed
[0;32m  CMD OK[0m
[0;33m  CMD [in path_reset_repo]: /Users/alexandruspac/Developer/AsheraFlow/AsheraFlow/target/release/AsheraFlow reset  -- file1.txt[0m
[2025-04-06T15:23:28Z INFO  AsheraFlow] AsheraFlow application starting...
[2025-04-06T15:23:28Z INFO  AsheraFlow] Handling command: Reset { revision: "", paths: ["file1.txt"], soft: false, mixed: true, hard: false }
[2025-04-06T15:23:28Z INFO  AsheraFlow] Executing ResetCommand with revision: "", paths: ["file1.txt"]
Starting reset operation...
Resetting 1 paths in index to commit 2ce76dfc
Parsing tree object: 22fc390398bee180968a2cc7edc2e6e8f8e5be53
Tree parse: Found file entry: file1.txt -> 074c3daf449107e2eb48885fc235a22796aa9711 (mode 100644)
Tree parse: Found file entry: file2.txt -> 510f0a5c67260391a39e9649b47ac9e77d428264 (mode 100644)
Tree parse: Found file entry: file3.txt -> 0625e276795ad8c80ed57e47d862dbe0afb9a393 (mode 100644)
Adding to index: file1.txt/file1.txt
Reset completed in 0.00s
[0;32m  CMD OK[0m
[0;33mTEST: Path Reset: HEAD should still be C3[0m
[0;31mFAIL: Path Reset: HEAD should still be C3 - Expected HEAD OID '', but got '2ce76dfcf714875c04674c6e08525762d4cea2fa'. HEAD content: 'ref: refs/heads/master' [0m
[0;33mTEST: Path Reset: Index should differ from HEAD (C3) because file1 was reset[0m
[0;32mPASS: Path Reset: Index should differ from HEAD (C3) because file1 was reset (Index differs from HEAD as expected)[0m
[0;33mTEST: Path Reset: Working dir file1.txt should exist[0m
[0;32mPASS: Path Reset: Working dir file1.txt should exist[0m
[0;33mTEST: Path Reset: Working dir file2.txt should exist[0m
[0;32mPASS: Path Reset: Working dir file2.txt should exist[0m
[0;33mTEST: Path Reset: Working dir file3.txt should exist[0m
[0;32mPASS: Path Reset: Working dir file3.txt should exist[0m
[0;33mTEST: Path Reset: Working dir file1.txt should contain unstaged change[0m
[0;32mPASS: Path Reset: Working dir file1.txt should contain unstaged change[0m
[0;33mTEST: Path Reset: Working dir file3.txt should contain C3 content[0m
[0;32mPASS: Path Reset: Working dir file3.txt should contain C3 content[0m

[0;34m--- Test Summary ---[0m
[0;32mTests Passed: 21[0m
[0;31mTests Failed: 9[0m
Cleaned up temporary directory: /var/folders/0z/02sl9x695lj1flvcl639dvm40000gn/T/tmp.Lbw4dP8uRd
